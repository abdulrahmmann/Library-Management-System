<app-admin-layout>
  <div class="bg-white rounded-xl p-5">

    <div class="flex items-center justify-between mb-5 flex-wrap">
      <h2 class="box-title">Account Registration Requests</h2>
      <button (click)="toggleSort()"
              class="px-3 py-2 flex items-center gap-1 border-2 border-ghostWhiteColor hover:bg-ghostWhiteColor rounded-lg cursor-pointer">
        <h3 class="font-medium text-primaryDarkColor4 text-start sm:text-sm">Oldest to Recent</h3>
        <img src="/arrow-swap.svg" alt=""/>
      </button>
    </div>

    <div class="card">
      <p-table
        [value]="allAccounts"
        [paginator]="true"
        [rows]="6"
        [tableStyle]="{ 'min-width': '50rem' }"
        [rowsPerPageOptions]="[6, 12, 20]"
      >
        <ng-template #header>
          <tr>
            <th scope="col" class="border-none text-tableColor whitespace-nowrap text-sm">Name</th>
            <th scope="col" class="border-none text-tableColor whitespace-nowrap text-sm">Date Joined</th>
            <th scope="col" class="border-none text-tableColor whitespace-nowrap text-sm">University ID No</th>
            <th scope="col" class="border-none text-tableColor whitespace-nowrap text-sm">University ID Card</th>
            <th scope="col" class="border-none text-tableColor whitespace-nowrap text-sm">Actions</th>
          </tr>
        </ng-template>
        <ng-template #body let-accReq>
          <tr>
            <td class="text-xs text-tableColor">
              <div class="flex items-center gap-2">
                @if (accReq.profilePic) {
                  <img [src]="accReq.profilePic" alt="user img" class="size-10 rounded-full object-contain"/>
                } @else {
                  <div [class]="profilePicService.getStyles(accReq.name)">
                    {{ accReq.name.slice(0, 2) }}
                  </div>
                }
                <div>
                  <h2 class="text-primaryDarkColor3 font-semibold text-sm">{{ accReq.name }}</h2>
                  <p class="text-start text-secondaryGreyColor">{{ accReq.email }}</p>
                </div>
              </div>

            </td>
            <td class="text-xs text-tableColor">{{ accReq.dateJoined | date }}</td>
            <td class="text-xs text-tableColor">{{ accReq.universityId }}</td>
            <td class="text-xs text-tableColor">
              <div class="flex items-center gap-1 cursor-pointer">
                <img src="/eye-blue.svg" alt="">
                <h3 class="text-sm font-medium text-[#0089F1]">View ID Card</h3>
              </div>
            </td>
            <td>
              <div class="flex items-center gap-2">
                <div class="card flex justify-center">
                  <p-button (click)="showApproveDialog()" label="Approve" class="btn-approve"/>
                  <p-dialog header="Approve" [modal]="true" [(visible)]="visibleApprove" class="acc-req-modals"
                            [maximizable]="true">
                    <div class="text-center">
                      <img src="/approve.svg" alt="" class="mx-auto"/>
                      <h2 class="text-xl font-semibold text-primaryDarkColor3 mt-3">Approve Book Request</h2>
                      <p class="text-base text-secondaryGreyColor mt-1">
                        Approve the student’s account request and grant access.<br/> A confirmation email will be sent
                        upon
                        approval.
                      </p>
                      <button
                        class="mt-2  rounded-lg bg-[#4C7B62] text-base font-semibold text-white py-3.5 text-center w-full">
                        Approve & Send Confirmation
                      </button>
                    </div>
                  </p-dialog>
                </div>

                <div class="card flex justify-center">
                  <p-button (click)="showDenyDialog()" label="Deny" class="btn-deny"/>
                  <p-dialog header="Deny" [modal]="true" [(visible)]="visibleDeny" class="acc-req-modals"
                            [maximizable]="true">
                    <div class="text-center">
                      <img src="/deny.svg" alt="" class="mx-auto"/>
                      <h2 class="text-xl font-semibold text-primaryDarkColor3 mt-3">Deny Book Request</h2>
                      <p class="text-base text-secondaryGreyColor mt-1">
                        Denying this request will notify the student they’re not <br /> eligible due to unsuccessful ID card
                        verification.
                      </p>
                      <button
                        class="mt-2  rounded-lg bg-[#F46F70] text-base font-semibold text-white py-3.5 text-center w-full">
                        Deny & Notify Student
                      </button>
                    </div>
                  </p-dialog>
                </div>

              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

  </div>
</app-admin-layout>
